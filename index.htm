<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è™›æºéˆæµ - éˆæµç‹‚å¾’</title>
    <style>
        :root { --main: #00f2ff; --bg: #030303; --border: rgba(0, 242, 255, 0.2); }
        body { background: var(--bg); color: #ccc; margin: 0; font-family: sans-serif; display: flex; height: 100vh; overflow: hidden; }
        
        /* ğŸŒŒ é«˜è§£æåº¦ç¾å·¥ï¼šå‹•æ…‹æ˜Ÿè¼ */
        #star-canvas { position: fixed; top: 0; left: 0; z-index: -1; }
        
        .sidebar { width: 260px; background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); border-right: 1px solid var(--border); display: flex; flex-direction: column; transition: 0.3s; z-index: 1002; }
        .menu-item { padding: 20px 30px; cursor: pointer; color: #555; font-size: 0.9rem; letter-spacing: 2px; border-left: 3px solid transparent; }
        .menu-item.active { color: var(--main); background: rgba(0,242,255,0.05); border-left-color: var(--main); }

        .view { flex: 1; display: flex; flex-direction: column; position: relative; }
        header { padding: 20px 40px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        #scroll-content { flex: 1; overflow-y: auto; padding: 40px; scroll-behavior: smooth; }

        /* ğŸ“„ å‹•æ…‹é•·ç¯‡å…§å®¹æ¨£å¼ */
        .content-body { max-width: 900px; margin: 0 auto; line-height: 2.2; white-space: pre-wrap; font-size: 1.1rem; }
        
        /* ğŸ“± æ‰‹æ©Ÿ RWD */
        @media (max-width: 768px) {
            .sidebar { position: fixed; left: -260px; height: 100vh; }
            .sidebar.open { left: 0; }
            .view { padding-top: 60px; }
        }
    </style>
</head>
<body>
    <canvas id="star-canvas"></canvas>
    <nav class="sidebar" id="nav">
        <div style="padding:40px 20px; text-align:center; color:var(--main); letter-spacing:5px;">è™›æºéˆæµ</div>
        <div class="menu-item" onclick="sw('01_è™›æºå®£è¨€_Declaration')">â—‡ è™›æºå®£è¨€</div>
        <div class="menu-item" onclick="sw('05_å…§å®¹é¡˜æ™¯_Vision')">â—‡ å…§å®¹é¡˜æ™¯</div>
        <div class="menu-item" onclick="sw('02_éˆæµå…‰è­œ_Spectrum')">â—‡ éˆæµå…‰è­œ</div>
        <div class="menu-item" onclick="sw('oracle')">â—‡ ç­”æ¡ˆä¹‹æ›¸</div>
        <div class="menu-item" onclick="sw('tarot')">â—‡ éˆæµå¡”ç¾…</div>
        <div class="menu-item" onclick="sw('daily')">â—‡ ä»Šæ—¥å»ºè­°</div>
        <div class="menu-item" onclick="sw('test')">â—‡ å‘½é‹è¨ºæ–·</div>
    </nav>

    <div class="view">
        <header><div id="title" style="color:var(--main);">ç³»çµ±è¼‰å…¥ä¸­...</div></header>
        <div id="scroll-content"></div>
    </div>

<script>
    const URL = "https://script.google.com/macros/s/AKfycbwmcu38-e5hYxSWbpvIdaAC2fsz75zH1leGmlkZRaVjeGcMJqlsomXNBx6LOWLi_HeJ/exec";
    
    async function sw(m) {
        const titleMap = { '01_è™›æºå®£è¨€_Declaration': 'è™›æºå®£è¨€', '05_å…§å®¹é¡˜æ™¯_Vision': 'å…§å®¹é¡˜æ™¯', 'oracle': 'ç­”æ¡ˆä¹‹æ›¸', 'tarot': 'éˆæµå¡”ç¾…', 'daily': 'ä»Šæ—¥å»ºè­°', '02_éˆæµå…‰è­œ_Spectrum': 'éˆæµå…‰è­œ' };
        document.getElementById('title').innerText = titleMap[m] || 'æ¨¡çµ„';
        const box = document.getElementById('scroll-content');
        box.innerHTML = "æ­£åœ¨åŒæ­¥é˜¿å¡è¥¿æ•¸æ“š...";

        if (['01_è™›æºå®£è¨€_Declaration', '05_å…§å®¹é¡˜æ™¯_Vision'].includes(m)) {
            const res = await fetch(URL, { method: "POST", body: JSON.stringify({ action: "getContent", folder: m }) });
            const data = await res.json();
            box.innerHTML = `<div class="content-body">${data.reply}</div>`;
        } else if (m === 'oracle' || m === 'tarot' || m === 'daily') {
            const action = m === 'oracle' ? "getOracle" : (m === 'tarot' ? "getTarot" : "getDaily");
            box.innerHTML = `<button onclick="trigger('${action}')" style="background:var(--main); padding:20px;">â—ˆ æ„Ÿæ‡‰ç•¶ä¸‹é »ç‡ â—ˆ</button><div id="res-box"></div>`;
        } else if (m === '02_éˆæµå…‰è­œ_Spectrum') {
            const res = await fetch(URL, { method: "POST", body: JSON.stringify({ action: "getList" }) });
            const data = await res.json();
            box.innerHTML = "";
            data.list.forEach(n => { box.innerHTML += `<div onclick="loadSpectrum('${n}')" style="cursor:pointer; padding:15px; border-bottom:1px solid #111;">â—ˆ ${n}</div>`; });
        }
    }

    async function trigger(action) {
        document.getElementById('res-box').innerHTML = "æ­£åœ¨æ ¡æº–é »ç‡...";
        const res = await fetch(URL, { method: "POST", body: JSON.stringify({ action: action }) });
        const data = await res.json();
        document.getElementById('res-box').innerHTML = `<div style="border:1px solid var(--main); padding:30px; margin-top:20px;">${data.reply}</div>`;
    }
    // æ˜Ÿè¼èƒŒæ™¯å¼•æ“ä»£ç¢¼ç•¥...
    sw('01_è™›æºå®£è¨€_Declaration');
</script>
</body>
</html>
